{"version":3,"file":"static/chunks/pages/audio-1a5131e05b78f8a6.js","mappings":"oFACA,CAAAA,OAAAC,QAAA,CAAAD,OAAAC,QAAA,MAAAC,IAAA,EACA,SACA,WACA,OAAeC,EAAQ,KACvB,EACA,6HC0EAC,CAAAA,EAAA,QAAeC,CAAAA,EAAAA,EAAAA,EAAAA,EArEf,UAAqB,CACjB,GAAM,CAACC,EAAWC,EAAa,CAAGC,CAAAA,EAAAA,EAAAA,QAAAA,EAA8BC,KAAAA,GAC1DC,EAA0BC,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,SAAY,CACpD,IAAMC,EAAYC,EAAAA,CAAAA,CAAAA,MAAmB,CAC/BC,EAASF,EAAUG,GAAG,CACtBC,EAAU,MAAMC,CAAAA,EAAAA,EAAAA,EAAAA,EAAeH,GACrCP,EAAaS,GAAW,EAC5B,EAAG,EAAE,EAECE,EAAoBP,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,SAAY,CAC9C,IAAMC,EAAYC,EAAAA,CAAAA,CAAAA,MAAmB,CAC/BC,EAASF,EAAUG,GAAG,CACtBC,EAAU,MAAMC,CAAAA,EAAAA,EAAAA,EAAAA,EAAeH,GACjCE,EAAU,IAGd,MAAMG,CAAAA,EAAAA,EAAAA,EAAAA,EAAgBL,EAAQ,GAC9B,MAAMM,CAAAA,EAAAA,EAAAA,EAAAA,EAAkBN,GAC5B,EAAG,EAAE,EACCO,EAAqBV,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,SAAY,CAC/C,IAAMC,EAAYC,EAAAA,CAAAA,CAAAA,MAAmB,CAC/BC,EAASF,EAAUG,GAAG,CACtBC,EAAU,MAAMC,CAAAA,EAAAA,EAAAA,EAAAA,EAAeH,GACjCE,EAAU,IAGd,MAAMG,CAAAA,EAAAA,EAAAA,EAAAA,EAAgBL,EAAQ,GAC9B,MAAMM,CAAAA,EAAAA,EAAAA,EAAAA,EAAkBN,GAC5B,EAAG,EAAE,SAEL,EACKD,CAAAA,CAAAA,MAAmB,EAClBA,EAAAA,CAAAA,CAAAA,MAAmB,YAAYS,EAAAA,EAAoB,CAQrD,GAAAC,EAAAC,IAAA,EAACC,MAAAA,WACG,GAAAF,EAAAC,IAAA,EAACC,MAAAA,WAAI,aACU,IACVnB,KAAcG,IAAdH,EAA0B,UAAYA,EAAY,MAAQ,IAAI,IAEnE,GAAAiB,EAAAC,IAAA,EAACC,MAAAA,WACG,GAAAF,EAAAG,GAAA,EAACC,EAAAA,CAAaA,CAAAA,CACVC,SAAU,CAACf,EAAAA,CAAAA,CAAAA,MAAmB,CAC9BgB,QAASnB,WACZ,kBAGD,GAAAa,EAAAG,GAAA,EAACI,EAAAA,CAAaA,CAAAA,CACVF,SAAU,CAACtB,EACXuB,QAASX,WACZ,WAGD,GAAAK,EAAAG,GAAA,EAACI,EAAAA,CAAaA,CAAAA,CACVF,SAAU,CAACtB,EACXuB,QAASR,WACZ,kBA1BL,GAAAE,EAAAG,GAAA,EAACD,MAAAA,UAAI,0DAEZ,AA8BL","sources":["webpack://_N_E/?5214","webpack://_N_E/./src/pages/audio.tsx","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/audio\",\n      function () {\n        return require(\"private-next-pages/audio.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/audio\"])\n      });\n    }\n  ","import { DefaultButton, PrimaryButton } from \"@fluentui/react\";\r\nimport { AdbDaemonWebUsbDevice } from \"@yume-chan/adb-daemon-webusb\";\r\nimport {\r\n    aoaGetProtocol,\r\n    aoaSetAudioMode,\r\n    aoaStartAccessory,\r\n} from \"@yume-chan/aoa\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { useCallback, useState } from \"react\";\r\nimport { GLOBAL_STATE } from \"../state\";\r\n\r\nfunction AudioPage() {\r\n    const [supported, setSupported] = useState<boolean | undefined>(undefined);\r\n    const handleQuerySupportClick = useCallback(async () => {\r\n        const transport = GLOBAL_STATE.device as AdbDaemonWebUsbDevice;\r\n        const device = transport.raw;\r\n        const version = await aoaGetProtocol(device);\r\n        setSupported(version >= 2);\r\n    }, []);\r\n\r\n    const handleEnableClick = useCallback(async () => {\r\n        const transport = GLOBAL_STATE.device as AdbDaemonWebUsbDevice;\r\n        const device = transport.raw;\r\n        const version = await aoaGetProtocol(device);\r\n        if (version < 2) {\r\n            return;\r\n        }\r\n        await aoaSetAudioMode(device, 1);\r\n        await aoaStartAccessory(device);\r\n    }, []);\r\n    const handleDisableClick = useCallback(async () => {\r\n        const transport = GLOBAL_STATE.device as AdbDaemonWebUsbDevice;\r\n        const device = transport.raw;\r\n        const version = await aoaGetProtocol(device);\r\n        if (version < 2) {\r\n            return;\r\n        }\r\n        await aoaSetAudioMode(device, 0);\r\n        await aoaStartAccessory(device);\r\n    }, []);\r\n\r\n    if (\r\n        !GLOBAL_STATE.device ||\r\n        !(GLOBAL_STATE.device instanceof AdbDaemonWebUsbDevice)\r\n    ) {\r\n        return (\r\n            <div>Audio forward can only be used with WebUSB connection.</div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                Supported:{\" \"}\r\n                {supported === undefined ? \"Unknown\" : supported ? \"Yes\" : \"No\"}\r\n            </div>\r\n            <div>\r\n                <PrimaryButton\r\n                    disabled={!GLOBAL_STATE.device}\r\n                    onClick={handleQuerySupportClick}\r\n                >\r\n                    Query Support\r\n                </PrimaryButton>\r\n                <DefaultButton\r\n                    disabled={!supported}\r\n                    onClick={handleEnableClick}\r\n                >\r\n                    Enable\r\n                </DefaultButton>\r\n                <DefaultButton\r\n                    disabled={!supported}\r\n                    onClick={handleDisableClick}\r\n                >\r\n                    Disable\r\n                </DefaultButton>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default observer(AudioPage);\r\n"],"names":["window","__NEXT_P","push","__webpack_require__","__webpack_exports__","observer","supported","setSupported","useState","undefined","handleQuerySupportClick","useCallback","transport","GLOBAL_STATE","device","raw","version","aoaGetProtocol","handleEnableClick","aoaSetAudioMode","aoaStartAccessory","handleDisableClick","AdbDaemonWebUsbDevice","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsxs","div","jsx","PrimaryButton","disabled","onClick","DefaultButton"],"sourceRoot":""}