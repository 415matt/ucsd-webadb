{"version":3,"file":"static/chunks/pages/packet-log-36df7ef630d1e9de.js","mappings":"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","sources":["webpack://_N_E/?d4e5","webpack://_N_E/./src/pages/packet-log.tsx","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/packet-log\",\n      function () {\n        return require(\"private-next-pages/packet-log.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/packet-log\"])\n      });\n    }\n  ","import { ICommandBarItemProps, Stack, StackItem } from \"@fluentui/react\";\r\nimport { makeStyles, mergeClasses, shorthands } from \"@griffel/react\";\r\nimport { AdbCommand, decodeUtf8 } from \"@yume-chan/adb\";\r\nimport { action, autorun, makeAutoObservable, runInAction } from \"mobx\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { NextPage } from \"next\";\r\nimport Head from \"next/head\";\r\nimport { PointerEvent } from \"react\";\r\nimport {\r\n    CommandBar,\r\n    Grid,\r\n    GridCellProps,\r\n    GridColumn,\r\n    GridHeaderProps,\r\n    GridRowProps,\r\n    HexViewer,\r\n    ObservableListSelection,\r\n    isModKey,\r\n    toText,\r\n} from \"../components\";\r\nimport { GLOBAL_STATE } from \"../state\";\r\nimport {\r\n    Icons,\r\n    RouteStackProps,\r\n    useStableCallback,\r\n    withDisplayName,\r\n} from \"../utils\";\r\n\r\nconst ADB_COMMAND_NAME = {\r\n    [AdbCommand.Auth]: \"AUTH\",\r\n    [AdbCommand.Close]: \"CLSE\",\r\n    [AdbCommand.Connect]: \"CNXN\",\r\n    [AdbCommand.OK]: \"OKAY\",\r\n    [AdbCommand.Open]: \"OPEN\",\r\n    [AdbCommand.Write]: \"WRTE\",\r\n};\r\n\r\ninterface Column extends GridColumn {\r\n    title: string;\r\n}\r\n\r\nconst LINE_HEIGHT = 32;\r\n\r\nfunction uint8ArrayToHexString(array: Uint8Array) {\r\n    return Array.from(array)\r\n        .map((byte) => byte.toString(16).padStart(2, \"0\"))\r\n        .join(\" \");\r\n}\r\n\r\nconst state = new (class {\r\n    get empty() {\r\n        return !GLOBAL_STATE.logs.length;\r\n    }\r\n\r\n    get commandBarItems(): ICommandBarItemProps[] {\r\n        return [\r\n            {\r\n                key: \"clear\",\r\n                disabled: this.empty,\r\n                iconProps: { iconName: Icons.Delete },\r\n                text: \"Clear\",\r\n                onClick: action(() => GLOBAL_STATE.clearLog()),\r\n            },\r\n            {\r\n                key: \"select-all\",\r\n                disabled: this.empty,\r\n                iconProps: { iconName: Icons.Wand },\r\n                text: \"Select All\",\r\n                onClick: action(() => {\r\n                    this.selection.clear();\r\n                    this.selection.select(\r\n                        GLOBAL_STATE.logs.length - 1,\r\n                        false,\r\n                        true\r\n                    );\r\n                }),\r\n            },\r\n            {\r\n                key: \"copy\",\r\n                disabled: this.selection.size === 0,\r\n                iconProps: { iconName: Icons.Copy },\r\n                text: \"Copy\",\r\n                onClick: () => {\r\n                    let text = \"\";\r\n                    for (const index of this.selection) {\r\n                        const entry = GLOBAL_STATE.logs[index];\r\n                        // prettier-ignore\r\n                        text += `${\r\n                            entry.timestamp!.toISOString()\r\n                        }\\t${\r\n                            entry.direction === 'in' ? \"IN\" : \"OUT\"\r\n                        }\\t${\r\n                            ADB_COMMAND_NAME[entry.command as keyof typeof ADB_COMMAND_NAME]\r\n                        }\\t${\r\n                            entry.arg0.toString(16).padStart(8,'0')\r\n                        }\\t${\r\n                            entry.arg1.toString(16).padStart(8,'0')\r\n                        }\\t${\r\n                            uint8ArrayToHexString(entry.payload)\r\n                        }\\n`;\r\n                    }\r\n                    navigator.clipboard.writeText(text);\r\n                },\r\n            },\r\n        ];\r\n    }\r\n\r\n    selection = new ObservableListSelection();\r\n\r\n    constructor() {\r\n        makeAutoObservable(this, {});\r\n\r\n        autorun(() => {\r\n            if (GLOBAL_STATE.logs.length === 0) {\r\n                runInAction(() => this.selection.clear());\r\n            }\r\n        });\r\n    }\r\n})();\r\n\r\nconst useClasses = makeStyles({\r\n    grow: {\r\n        height: 0,\r\n    },\r\n    grid: {\r\n        height: \"100%\",\r\n    },\r\n    header: {\r\n        textAlign: \"center\",\r\n        lineHeight: `${LINE_HEIGHT}px`,\r\n    },\r\n    row: {\r\n        \"&:hover\": {\r\n            backgroundColor: \"#f3f2f1\",\r\n        },\r\n    },\r\n    selected: {\r\n        backgroundColor: \"#edebe9\",\r\n    },\r\n    code: {\r\n        fontFamily: \"monospace\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\",\r\n        lineHeight: LINE_HEIGHT + \"px\",\r\n        cursor: \"default\",\r\n        ...shorthands.overflow(\"hidden\"),\r\n    },\r\n    hexViewer: {\r\n        ...shorthands.padding(\"12px\"),\r\n        ...shorthands.borderTop(\"1px\", \"solid\", \"rgb(243, 242, 241)\"),\r\n    },\r\n});\r\n\r\nconst columns: Column[] = [\r\n    {\r\n        title: \"Direction\",\r\n        width: 100,\r\n        CellComponent: withDisplayName(\"Direction\")(\r\n            ({ className, rowIndex, ...rest }: GridCellProps) => {\r\n                const item = GLOBAL_STATE.logs[rowIndex];\r\n\r\n                const classes = useClasses();\r\n\r\n                return (\r\n                    <div\r\n                        className={mergeClasses(className, classes.code)}\r\n                        {...rest}\r\n                    >\r\n                        {item.direction}\r\n                    </div>\r\n                );\r\n            }\r\n        ),\r\n    },\r\n    {\r\n        title: \"Command\",\r\n        width: 100,\r\n        CellComponent: withDisplayName(\"Command\")(\r\n            ({ className, rowIndex, ...rest }: GridCellProps) => {\r\n                const item = GLOBAL_STATE.logs[rowIndex];\r\n\r\n                if (!item.commandString) {\r\n                    item.commandString =\r\n                        ADB_COMMAND_NAME[item.command as AdbCommand] ??\r\n                        decodeUtf8(new Uint32Array([item.command]));\r\n                }\r\n\r\n                const classes = useClasses();\r\n\r\n                return (\r\n                    <div\r\n                        className={mergeClasses(className, classes.code)}\r\n                        {...rest}\r\n                    >\r\n                        {item.commandString}\r\n                    </div>\r\n                );\r\n            }\r\n        ),\r\n    },\r\n    {\r\n        title: \"Arg0\",\r\n        width: 100,\r\n        CellComponent: withDisplayName(\"Command\")(\r\n            ({ className, rowIndex, ...rest }: GridCellProps) => {\r\n                const item = GLOBAL_STATE.logs[rowIndex];\r\n\r\n                if (!item.arg0String) {\r\n                    item.arg0String = item.arg0.toString(16).padStart(8, \"0\");\r\n                }\r\n\r\n                const classes = useClasses();\r\n\r\n                return (\r\n                    <div\r\n                        className={mergeClasses(className, classes.code)}\r\n                        {...rest}\r\n                    >\r\n                        {item.arg0String}\r\n                    </div>\r\n                );\r\n            }\r\n        ),\r\n    },\r\n    {\r\n        title: \"Arg1\",\r\n        width: 100,\r\n        CellComponent: withDisplayName(\"Command\")(\r\n            ({ className, rowIndex, ...rest }: GridCellProps) => {\r\n                const item = GLOBAL_STATE.logs[rowIndex];\r\n\r\n                if (!item.arg1String) {\r\n                    item.arg1String = item.arg1.toString(16).padStart(8, \"0\");\r\n                }\r\n\r\n                const classes = useClasses();\r\n\r\n                return (\r\n                    <div\r\n                        className={mergeClasses(className, classes.code)}\r\n                        {...rest}\r\n                    >\r\n                        {item.arg1String}\r\n                    </div>\r\n                );\r\n            }\r\n        ),\r\n    },\r\n    {\r\n        title: \"Payload\",\r\n        width: 200,\r\n        flexGrow: 1,\r\n        CellComponent: withDisplayName(\"Command\")(\r\n            ({ className, rowIndex, ...rest }: GridCellProps) => {\r\n                const item = GLOBAL_STATE.logs[rowIndex];\r\n\r\n                if (!item.payloadString) {\r\n                    item.payloadString = toText(item.payload.subarray(0, 100));\r\n                }\r\n\r\n                const classes = useClasses();\r\n\r\n                return (\r\n                    <div\r\n                        className={mergeClasses(className, classes.code)}\r\n                        {...rest}\r\n                    >\r\n                        {item.payloadString}\r\n                    </div>\r\n                );\r\n            }\r\n        ),\r\n    },\r\n];\r\n\r\nconst Header = withDisplayName(\"Header\")(\r\n    ({ className, columnIndex, ...rest }: GridHeaderProps) => {\r\n        const classes = useClasses();\r\n\r\n        return (\r\n            <div className={mergeClasses(className, classes.header)} {...rest}>\r\n                {columns[columnIndex].title}\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nconst Row = observer(function Row({\r\n    className,\r\n    rowIndex,\r\n    ...rest\r\n}: GridRowProps) {\r\n    const classes = useClasses();\r\n\r\n    const handlePointerDown = useStableCallback(\r\n        (e: PointerEvent<HTMLDivElement>) => {\r\n            runInAction(() => {\r\n                if (e.shiftKey) {\r\n                    e.preventDefault();\r\n                }\r\n                state.selection.select(rowIndex, isModKey(e), e.shiftKey);\r\n            });\r\n        }\r\n    );\r\n\r\n    return (\r\n        <div\r\n            className={mergeClasses(\r\n                className,\r\n                classes.row,\r\n                state.selection.has(rowIndex) && classes.selected\r\n            )}\r\n            onPointerDown={handlePointerDown}\r\n            {...rest}\r\n        />\r\n    );\r\n});\r\n\r\nconst PacketLog: NextPage = () => {\r\n    const classes = useClasses();\r\n\r\n    return (\r\n        <Stack {...RouteStackProps} tokens={{}}>\r\n            <Head>\r\n                <title>Packet Log - Tango</title>\r\n            </Head>\r\n\r\n            <CommandBar items={state.commandBarItems} />\r\n\r\n            <StackItem className={classes.grow} grow>\r\n                <Grid\r\n                    className={classes.grid}\r\n                    rowCount={GLOBAL_STATE.logs.length}\r\n                    rowHeight={LINE_HEIGHT}\r\n                    columns={columns}\r\n                    HeaderComponent={Header}\r\n                    RowComponent={Row}\r\n                />\r\n            </StackItem>\r\n\r\n            {state.selection.selectedIndex !== null &&\r\n                GLOBAL_STATE.logs[state.selection.selectedIndex].payload\r\n                    .length > 0 && (\r\n                    <StackItem className={classes.grow} grow>\r\n                        <HexViewer\r\n                            className={classes.hexViewer}\r\n                            data={\r\n                                GLOBAL_STATE.logs[state.selection.selectedIndex]\r\n                                    .payload\r\n                            }\r\n                        />\r\n                    </StackItem>\r\n                )}\r\n        </Stack>\r\n    );\r\n};\r\n\r\nexport default observer(PacketLog);\r\n"],"names":["window","__NEXT_P","push","__webpack_require__","ADB_COMMAND_NAME","AdbCommand","state","empty","GLOBAL_STATE","commandBarItems","key","disabled","iconProps","iconName","Icons","text","onClick","action","selection","clear","select","size","index","entry","timestamp","toISOString","direction","command","arg0","toString","padStart","uint8ArrayToHexString","arg1","concat","Array","from","payload","map","byte","join","navigator","clipboard","writeText","constructor","ObservableListSelection","makeAutoObservable","autorun","runInAction","useClasses","makeStyles","grow","height","grid","header","textAlign","lineHeight","row","backgroundColor","selected","code","fontFamily","textOverflow","whiteSpace","LINE_HEIGHT","cursor","shorthands","hexViewer","columns","title","width","CellComponent","withDisplayName","className","rowIndex","rest","param","item","classes","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","div","mergeClasses","commandString","decodeUtf8","Uint32Array","arg0String","arg1String","flexGrow","payloadString","toText","subarray","Header","columnIndex","Row","observer","handlePointerDown","useStableCallback","e","shiftKey","preventDefault","isModKey","has","onPointerDown","PacketLog","jsxs","Stack","RouteStackProps","tokens","Head","CommandBar","items","StackItem","Grid","rowCount","rowHeight","HeaderComponent","RowComponent","selectedIndex","length","HexViewer","data","__webpack_exports__"],"sourceRoot":""}